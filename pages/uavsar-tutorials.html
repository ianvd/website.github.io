<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>UAVSAR Tutorials</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Jack Tarricone</a></h1>
                <nav><ul>
                    <li><a href="/../">Home</a></li>
                    <li><a href="/pages/cv.html">CV</a></li>
                    <li><a href="/pages/publications-conferences.html">Publications & Conferences</a></li>
                    <li><a href="/pages/research.html">Research</a></li>
                    <li><a href="/pages/software.html">Software</a></li>
                    <li><a href="/pages/agu-2021-poster.html">AGU 2021 Poster</a></li>
                    <li class="active"><a href="/pages/uavsar-tutorials.html">UAVSAR Tutorials</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">UAVSAR Tutorials</h1>
    
    <h1>UAVSAR Data Access and Conversion</h1>
<p>```Learning Objectives
- overview of UAVSAR data (both InSAR and PolSAR products)
- demonstrate how to access and transform data to Geotiffs</p>
<div class="highlight"><pre><span></span><code><span class="n">There</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">UAVSAR</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="w"> </span><span class="n">Also</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="k">database</span><span class="p">.</span><span class="w"></span>

<span class="o">*</span><span class="w"> </span><span class="o">[</span><span class="n">Alaska Satellite Facility Vertex Portal</span><span class="o">]</span><span class="p">(</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="k">search</span><span class="p">.</span><span class="n">asf</span><span class="p">.</span><span class="n">alaska</span><span class="p">.</span><span class="n">edu</span><span class="o">/</span><span class="err">#</span><span class="o">/</span><span class="vm">?</span><span class="n">dataset</span><span class="o">=</span><span class="n">UAVSAR</span><span class="p">)</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="o">[</span><span class="n">NASA Earthdata Suborbital Search</span><span class="o">]</span><span class="p">(</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="k">search</span><span class="p">.</span><span class="n">earthdata</span><span class="p">.</span><span class="n">nasa</span><span class="p">.</span><span class="n">gov</span><span class="o">/</span><span class="n">portal</span><span class="o">/</span><span class="n">suborbital</span><span class="o">/</span><span class="k">search</span><span class="vm">?</span><span class="n">fi</span><span class="o">=</span><span class="n">UAVSAR</span><span class="o">&amp;</span><span class="k">as</span><span class="o">[</span><span class="n">instrument</span><span class="o">][</span><span class="n">0</span><span class="o">]=</span><span class="n">UAVSAR</span><span class="p">)</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="o">[</span><span class="n">JPL UAVSAR Data Search</span><span class="o">]</span><span class="p">(</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">uavsar</span><span class="p">.</span><span class="n">jpl</span><span class="p">.</span><span class="n">nasa</span><span class="p">.</span><span class="n">gov</span><span class="o">/</span><span class="n">cgi</span><span class="o">-</span><span class="n">bin</span><span class="o">/</span><span class="k">data</span><span class="p">.</span><span class="n">pl</span><span class="p">)</span><span class="w"></span>


<span class="err">```</span><span class="n">InSAR</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">Types</span><span class="w"></span>
<span class="err">:</span><span class="k">class</span><span class="err">:</span><span class="w"> </span><span class="n">InSAR</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">Types</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">ANN</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="p">(.</span><span class="n">ann</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">text</span><span class="w"> </span><span class="n">annotation</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">metadata</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">AMP</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="p">(.</span><span class="n">amp1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="p">.</span><span class="n">amp2</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">calibrated</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">looked</span><span class="w"> </span><span class="n">amplitude</span><span class="w"> </span><span class="n">products</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="nc">INT</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="p">(.</span><span class="nc">int</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">interferogram</span><span class="w"> </span><span class="n">product</span><span class="p">,</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="nf">format</span><span class="w"> </span><span class="p">(</span><span class="n">we</span><span class="w"> </span><span class="n">won</span><span class="s1">&#39;t be using these here)</span>
<span class="s1">- COR files (.cor): interferometric correlation product, a measure of the noise level of the phase</span>
<span class="s1">- GRD files (.grd): interferometric products projected to the ground in simple geographic coordinates (latitude, longitude)</span>
<span class="s1">- HGT file  (.hgt): the DEM that was used in the InSAR processing</span>
<span class="s1">- KML and KMZ files (.kml or .kmz): format for viewing files in Google Earth (can&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">analysis</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># import libraries</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">gdal</span>
<span class="kn">import</span> <span class="nn">os</span>  <span class="c1"># for chdir, getcwd, path.basename, path.exists</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> <span class="c1"># for DatetimeIndex</span>
<span class="kn">import</span> <span class="nn">codecs</span> <span class="c1"># for text parsing code</span>
<span class="kn">import</span> <span class="nn">netrc</span>
<span class="kn">import</span> <span class="nn">rasterio</span> <span class="k">as</span> <span class="nn">rio</span>
<span class="kn">import</span> <span class="nn">glob</span>
</code></pre></div>

<h2>Data Download</h2>
<p>We will use our NASA EarthData credentials and ASF Vertex to download an InSAR pair data into our notebook directly. For this tutorial, we will be working with UAVSAR data from February of 2020. If you want to use different data in the future, change the links in the files variable. The screengrab below shows how I generated these download links from the ASF site.</p>
<p><img src="../../img/asf_vertex.png" alt="asf vertex" width="800px"></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get NASA EARTHDATA Credentials from ~/.netrc or manual input</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="s1">&#39;/home/jovyan/.netrc&#39;</span><span class="p">,</span> <span class="mo">0o600</span><span class="p">)</span> <span class="c1">#only necessary on jupyterhub</span>
    <span class="p">(</span><span class="n">ASF_USER</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">ASF_PASS</span><span class="p">)</span> <span class="o">=</span> <span class="n">netrc</span><span class="o">.</span><span class="n">netrc</span><span class="p">()</span><span class="o">.</span><span class="n">authenticators</span><span class="p">(</span><span class="s2">&quot;urs.earthdata.nasa.gov&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">ASF_USER</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter Username: &quot;</span><span class="p">)</span>
    <span class="n">ASF_PASS</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Enter Password: &quot;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># directory in which the notebook resides</span>
<span class="k">if</span> <span class="s1">&#39;tutorial_home_dir&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>
     <span class="n">tutorial_home_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Notebook directory: &quot;</span><span class="p">,</span> <span class="n">tutorial_home_dir</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;/tmp/&#39;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">)</span>

<span class="c1"># directory for data downloads</span>

<span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://datapool.asf.alaska.edu/INTERFEROMETRY_GRD/UA/grmesa_27416_20003-028_20005-007_0011d_s01_L090_01_int_grd.zip&#39;</span><span class="p">,</span>
        <span class="s1">&#39;https://datapool.asf.alaska.edu/AMPLITUDE_GRD/UA/grmesa_27416_20003-028_20005-007_0011d_s01_L090_01_amp_grd.zip&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;downloading </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s1">...&#39;</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span><span class="n">filename</span><span class="p">)):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;wget -q </span><span class="si">{0}</span><span class="s2"> --user=</span><span class="si">{1}</span><span class="s2"> --password=</span><span class="si">{2}</span><span class="s2"> -P </span><span class="si">{3}</span><span class="s2"> -nc&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">ASF_USER</span><span class="p">,</span> <span class="n">ASF_PASS</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot; already exists. Skipping download ..&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># check to see if downloaded</span>
<span class="c1"># the *.* syntax means print all files in the directory</span>

<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;/tmp/*.*&quot;</span><span class="p">))</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">#use for deleting contents of temp directory if needed. DO NOT uncomment, this will cause the notebook to fail.</span>

<span class="c1">#files = glob.glob(&quot;/tmp/*.*&quot;)</span>
<span class="c1">#for f in files:</span>
<span class="c1">#    os.remove(f)</span>
</code></pre></div>

<h3>Unzipping the files we just downloaded</h3>
<div class="highlight"><pre><span></span><code><span class="c1">## unzip files just downloaded</span>

<span class="c1"># define file path for both files</span>
<span class="n">int_zip</span> <span class="o">=</span> <span class="s1">&#39;/tmp/grmesa_27416_20003-028_20005-007_0011d_s01_L090_01_int_grd.zip&#39;</span>
<span class="n">amp_zip</span> <span class="o">=</span> <span class="s1">&#39;/tmp/grmesa_27416_20003-028_20005-007_0011d_s01_L090_01_amp_grd.zip&#39;</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># unzip</span>

<span class="c1"># int</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">int_zip</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
    <span class="n">zip_ref</span><span class="o">.</span><span class="n">printdir</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Extracting all the files now...&#39;</span><span class="p">)</span>
    <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">)</span>

<span class="c1"># amp</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">amp_zip</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
    <span class="n">zip_ref</span><span class="o">.</span><span class="n">printdir</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Extracting all the files now...&#39;</span><span class="p">)</span>
    <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">)</span>
</code></pre></div>

<h3>Removing unwanted data</h3>
<p>For simplicity, we'll only work with HH polarization. The three other polarizations (VV, VH, HV) provide additional information about the surface properties and can be utilized in further analysis.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># clean up unwanted data from what we just downloaded</span>

<span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;/tmp&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="n">HV_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*HV_01*&#39;</span><span class="p">)</span> <span class="c1">#define all HV</span>
<span class="n">VV_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*VV_01*&#39;</span><span class="p">)</span> <span class="c1">#define all VV</span>
<span class="n">VH_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*VH_01*&#39;</span><span class="p">)</span> <span class="c1">#define all VH</span>
<span class="n">zips</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.zip&#39;</span><span class="p">)</span> <span class="c1"># define the zip files</span>

<span class="c1"># loops to remove them</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">HV_files</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">VV_files</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">VH_files</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">zips</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># check to see what files are left in the directory</span>

<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;/tmp/*.*&quot;</span><span class="p">))</span>
</code></pre></div>

<p>Now we only have the HH polarization, the annotation file, and the 6 .grd files!</p>
<h2>Converting Data to GeoTiffs</h2>
<p>The downloadable UAVSAR data comes in a flat binary format (.grd), which is not readable by GDAL (Geospatial Data Abstraction Library). Therefore it needs to be transformed for use in standard spatial analysis software (ArcGIS, QGIS, Python, R, MATLAB, etc.). To do this, we will use the uavsar_tiff_convert function, which takes information (latitude, longitude, number of lines and samples, data type, pixel size) from the annotation file to create an ENVI header (.hdr). Once the ENVI header is created, the files can be read into Python and converted to GeoTiffs.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># First, let&#39;s print the annotation file to get a look at it&#39;s content</span>
<span class="c1"># these file contain a lot of information and can be very intimidating and hard to understand, but being able to read them is vital to working this UAVSAR data</span>

<span class="c1">#f = open(&#39;/tmp/grmesa_27416_20003-028_20005-007_0011d_s01_L090HH_01.ann&#39;, &#39;r&#39;)</span>
<span class="c1">#file_contents = f.read()</span>
<span class="c1">#print (file_contents)</span>
<span class="err">!</span><span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="mi">15</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">grmesa_27416_20003</span><span class="o">-</span><span class="mi">028_20005</span><span class="o">-</span><span class="mi">007_0011</span><span class="n">d_s01_L090HH_01</span><span class="o">.</span><span class="n">ann</span>
</code></pre></div>

<p>This function pulls out information from the annotation file, builds and ENVI header, and then converts the data to GeoTIFFS.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># folder is path to a folder with an .ann (or .txt) and .grd files (.amp1, .amp2, .cor, .unw, .int)</span>

<span class="k">def</span> <span class="nf">uavsar_tiff_convert</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a header file for the input UAVSAR .grd file,</span>
<span class="sd">    allowing the data to be read as a raster dataset.</span>
<span class="sd">    :param folder:   the folder containing the UAVSAR .grd and .ann files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="n">int_file</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;int.grd&#39;</span><span class="p">))</span>

    <span class="c1"># Empty lists to put information that will be recalled later.</span>
    <span class="n">Lines_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">Samples_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">Latitude_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">Longitude_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">Files_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Step 1: Look through folder and determine how many different flights there are</span>
    <span class="c1"># by looking at the HDR files.</span>
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">files</span> <span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;.grd&quot;</span><span class="p">:</span>
            <span class="n">newfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.hdr&quot;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">newfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;ENVI</span>
<span class="s2">description = </span><span class="si">{DESCFIELD}</span><span class="s2"></span>
<span class="s2">samples = NSAMP</span>
<span class="s2">lines = NLINE</span>
<span class="s2">bands = 1</span>
<span class="s2">header offset = 0</span>
<span class="s2">data type = DATTYPE</span>
<span class="s2">interleave = bsq</span>
<span class="s2">sensor type = UAVSAR L-Band</span>
<span class="s2">byte order = 0</span>
<span class="s2">map info = {Geographic Lat/Lon,</span>
<span class="s2">            1.000,</span>
<span class="s2">            1.000,</span>
<span class="s2">            LON,</span>
<span class="s2">            LAT,  </span>
<span class="s2">            0.0000555600000000,</span>
<span class="s2">            0.0000555600000000,</span>
<span class="s2">            WGS-84, units=Degrees}</span>
<span class="s2">wavelength units = Unknown</span>
<span class="s2">                &quot;&quot;&quot;</span>
                          <span class="p">)</span>
            <span class="n">newfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">18</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Files_list</span><span class="p">:</span>
                <span class="n">Files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">18</span><span class="p">])</span>

    <span class="c1">#Variables used to recall indexed values.</span>
    <span class="n">var1</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1">#Step 2: Look through the folder and locate the annotation file(s).</span>
    <span class="c1"># These can be in either .txt or .ann file types.</span>
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">Files_list</span><span class="p">[</span><span class="n">var1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">files</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;.txt&quot;</span> <span class="ow">or</span> <span class="n">files</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;.ann&quot;</span><span class="p">:</span>
            <span class="c1">#Step 3: Once located, find the info we are interested in and append it to</span>
            <span class="c1"># the appropriate list. We limit the variables to &lt;=1 so that they only</span>
            <span class="c1"># return two values (one for each polarization of</span>
            <span class="n">searchfile</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;windows-1252&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">searchfile</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;Ground Range Data Latitude Lines&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">Lines</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">65</span><span class="p">:</span><span class="mi">70</span><span class="p">]</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of Lines: </span><span class="si">{</span><span class="n">Lines</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Lines</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Lines_list</span><span class="p">:</span>
                        <span class="n">Lines_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Lines</span><span class="p">)</span>

                <span class="k">elif</span> <span class="s2">&quot;Ground Range Data Longitude Samples&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">Samples</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">65</span><span class="p">:</span><span class="mi">70</span><span class="p">]</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of Samples: </span><span class="si">{</span><span class="n">Samples</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Samples</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Samples_list</span><span class="p">:</span>
                        <span class="n">Samples_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Samples</span><span class="p">)</span>

                <span class="k">elif</span> <span class="s2">&quot;Ground Range Data Starting Latitude&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">Latitude</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">65</span><span class="p">:</span><span class="mi">85</span><span class="p">]</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top left lat: </span><span class="si">{</span><span class="n">Latitude</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Latitude</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Latitude_list</span><span class="p">:</span>
                        <span class="n">Latitude_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Latitude</span><span class="p">)</span>

                <span class="k">elif</span> <span class="s2">&quot;Ground Range Data Starting Longitude&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">Longitude</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">65</span><span class="p">:</span><span class="mi">85</span><span class="p">]</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Top left Lon: </span><span class="si">{</span><span class="n">Longitude</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Longitude</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Longitude_list</span><span class="p">:</span>
                        <span class="n">Longitude_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Longitude</span><span class="p">)</span>



            <span class="c1">#Reset the variables to zero for each different flight date.</span>
            <span class="n">var1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">searchfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


    <span class="c1"># Step 3: Open .hdr file and replace data for all type 4 (real numbers) data</span>
    <span class="c1"># this all the .grd files expect for .int</span>
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">files</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;.hdr&quot;</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sources</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">sources</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sources</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;data type = DATTYPE&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">19</span><span class="p">],</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;DESCFIELD&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">24</span><span class="p">],</span> <span class="n">folder</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;lines&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">13</span><span class="p">],</span> <span class="n">Lines</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;samples&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">Samples</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;LAT&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">Latitude</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;LON&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">Longitude</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>

    <span class="c1"># Step 3: Open .hdr file and replace data for .int file date type 6 (complex)                 </span>
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">files</span><span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;.int.hdr&quot;</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sources</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">sources</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sources</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;data type = 4&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">13</span><span class="p">],</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;DESCFIELD&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">24</span><span class="p">],</span> <span class="n">folder</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;lines&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">13</span><span class="p">],</span> <span class="n">Lines</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;samples&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">Samples</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;LAT&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">Latitude</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="s2">&quot;LON&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span> <span class="n">Longitude</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sources</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>


    <span class="c1"># Step 4: Now we have an .hdr file, the data is geocoded and can be loaded into python with rasterio</span>
    <span class="c1"># once loaded in we use gdal.Translate to convert and save as a .tiff</span>

    <span class="n">data_to_process</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;*.grd&#39;</span><span class="p">))</span> <span class="c1"># list all .grd files</span>
    <span class="k">for</span> <span class="n">data_path</span> <span class="ow">in</span> <span class="n">data_to_process</span><span class="p">:</span> <span class="c1"># loop to open and translate .grd to .tiff, and save .tiffs using gdal</span>
        <span class="n">raster_dataset</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GA_ReadOnly</span><span class="p">)</span>
        <span class="n">raster</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Translate</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.tiff&#39;</span><span class="p">),</span> <span class="n">raster_dataset</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=</span> <span class="s1">&#39;Gtiff&#39;</span><span class="p">,</span> <span class="n">outputType</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GDT_Float32</span><span class="p">)</span>

    <span class="c1"># Step 5: Save the .int raster, needs separate save because of the complex format</span>
    <span class="n">data_to_process</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;*.int.grd&#39;</span><span class="p">))</span> <span class="c1"># list all .int.grd files (only 1)</span>
    <span class="k">for</span> <span class="n">data_path</span> <span class="ow">in</span> <span class="n">data_to_process</span><span class="p">:</span>
        <span class="n">raster_dataset</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GA_ReadOnly</span><span class="p">)</span>
        <span class="n">raster</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Translate</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.tiff&#39;</span><span class="p">),</span> <span class="n">raster_dataset</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=</span> <span class="s1">&#39;Gtiff&#39;</span><span class="p">,</span> <span class="n">outputType</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GDT_CFloat32</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;.tiffs have been created&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">data_folder</span> <span class="o">=</span> <span class="s1">&#39;/tmp&#39;</span> <span class="c1"># define folder where the .grd and .ann files are</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">uavsar_tiff_convert</span><span class="p">(</span><span class="n">data_folder</span><span class="p">)</span> <span class="c1"># call the tiff convert function, and it will print the information it extracted from the .ann file</span>
</code></pre></div>

<p>Now we'll delete the unneeded .grd and .hdr files that our tiffs have been created. If you're using this code on your local machine, this probably isn't absolutely necessary. The JupyterHub cloud we're working in has limited space, so deletion is needed.</p>
<div class="highlight"><pre><span></span><code><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">data_folder</span><span class="p">)</span>
<span class="n">grd</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.grd&#39;</span><span class="p">)</span> <span class="c1">#define .grd</span>
<span class="n">hdr</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.hdr*&#39;</span><span class="p">)</span> <span class="c1">#define .hdr</span>

<span class="c1"># remove both</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">grd</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">hdr</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># check what&#39;s in the directory, only .tiffs and our annotation file!</span>
<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.*&quot;</span><span class="p">))</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">### inspect our newly created .tiffs, and create named objects for each data type. We&#39;ll use these new obects in the next step</span>

<span class="c1"># amplitude from the first acquisition</span>
<span class="k">for</span> <span class="n">amp1</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*amp1.grd.tiff&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">amp1</span><span class="p">)</span>

<span class="c1"># amplitude from the second acquisition</span>
<span class="k">for</span> <span class="n">amp2</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*amp2.grd.tiff&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">amp2</span><span class="p">)</span>

<span class="c1"># coherence</span>
<span class="k">for</span> <span class="n">cor</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*cor.grd.tiff&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cor</span><span class="p">)</span>

<span class="c1"># unwrapped phase</span>
<span class="k">for</span> <span class="n">unw</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*unw.grd.tiff&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">unw</span><span class="p">)</span>

<span class="c1"># dem used in processing</span>
<span class="k">for</span> <span class="n">dem</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*hgt.grd.tiff&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dem</span><span class="p">)</span>
</code></pre></div>

<p>Inspect the meta data the rasters using the rio (shorthand for rasterio) <code>profile</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="n">unw_rast</span> <span class="o">=</span> <span class="n">rio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">unw</span><span class="p">)</span>
<span class="n">meta_data</span> <span class="o">=</span> <span class="n">unw_rast</span><span class="o">.</span><span class="n">profile</span>
<span class="nb">print</span><span class="p">(</span><span class="n">meta_data</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>
</code></pre></div>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://www.unr.edu/hydrologic-sciences">UNR Graduate Program of Hydrologic Sciences</a></li>
                            <li><a href="https://www.computationalmountainstudies.com/">Compututational Mountain Studies Lab</a></li>
                            <li><a href="https://snow.nasa.gov/campaigns/snowex">NASA SnowEx Campaign</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://github.com/jacktarricone/">Github</a></li>
                            <li><a href="https://twitter.com/jack_tarricone">Twitter</a></li>
                            <li><a href="jtarricone@nevada.unr.edu">Email</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>